{% extends "layout.html" %}

{% block title %}Post-Meeting | MeetAssist{% endblock %}

{% block content %}

<div class="my-5">
    <h2 class="mb-4 display-4">Post-Meeting Features</h2>
    <p class="lead">Understand your meetings better and improve future ones.</p>
    <hr>

    <div class="features-grid container py-5">
        <div class="row g-4">
            <div class="col-12 col-md-6 col-lg-4">
                <div class="feature-item p-4">
                    <h4 class="feature-title">Summarize</h4>
                    <p class="feature-text">Get a brief summary of the meeting.</p>
                </div>
            </div>
            <div class="col-12 col-md-6 col-lg-4">
                <div class="feature-item p-4">
                    <h4 class="feature-title">Extract Action Items</h4>
                    <p class="feature-text">Get a list of action items from the meeting.</p>
                </div>
            </div>
            <div class="col-12 col-md-6 col-lg-4">
                <div class="feature-item p-4">
                    <h4 class="feature-title">Analyze Participants' Sentiments</h4>
                    <p class="feature-text">Understand the sentiments of the participants during the meeting.</p>
                </div>
            </div>
            <div class="col-12 col-md-6 col-lg-4">
                <div class="feature-item p-4">
                    <h4 class="feature-title">Analyze Productivity</h4>
                    <p class="feature-text">Analyze the productivity of the meeting.</p>
                </div>
            </div>
            <div class="col-12 col-md-6 col-lg-4">
                <div class="feature-item p-4">
                    <h4 class="feature-title">Generate Suggestions for Improvements</h4>
                    <p class="feature-text">Get suggestions on how to improve future meetings.</p>
                </div>
            </div>
        </div>
    </div>
    




    <form action="/post-meeting-analysis-result" method="post" enctype="multipart/form-data">
        <div class="mb-4">
            <label for="meeting_transcript" class="form-label">Upload Meeting Transcript</label>
            <input type="file" class="form-control custom-input" id="meeting_transcript" name="meeting_transcript" required>
        </div>

        <div class="mb-4">
            <label for="analysis_type" class="form-label">Select Analysis</label>
            <div class="dropdown">
                <select class="form-select custom-select" id="analysis_type" name="analysis_type" required>
                    <option value="summary">Summarize</option>
                    <option value="action_items">Extract Action Items</option>
                    <option value="sentiment_analysis">Analyze Participants' Sentiments</option>
                    <option value="productivity_analysis">Analyze Productivity</option>
                    <option value="improvement_suggestions">Generate Suggestions for Improvements</option>
                </select>
            </div>
        </div>

        <button type="submit" class="btn btn-primary">Analyze</button>
    </form>

    <h3 class="mt-5">Uploaded Transcript</h3>
    <div class="mt-3 border p-3">
        <p id="transcript_text">Your uploaded transcript will be displayed here...</p>
    </div>
</div>

<script>
    document.getElementById('meeting_transcript').addEventListener('change', function(event) {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                let transcript = e.target.result;

                // Remove trailing and leading whitespaces and quotes
                transcript = transcript.trim().replace(/^['"]|['"]$/g, '');
                
                console.log(transcript);
                // Set the sanitized text content
                document.getElementById('transcript_text').textContent = transcript;
            };
            reader.readAsText(file);
        }
    });
</script>

{% endblock %}
